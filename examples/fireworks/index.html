<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Predicate Academy">
        <link rel="canonical" href="http://predigame.io/examples/fireworks/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Fireworks! - Predigame</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/color-brewer.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-116346762-1', 'predigame.io');
            ga('send', 'pageview');
        </script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">Predigame</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../..">Home</a>
                            </li>
                            <li >
                                <a href="../../about/">About</a>
                            </li>
                            <li >
                                <a href="https://medium.com/@predicateacad">Blog</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li class="active">
    <a href="./">Fireworks!</a>
</li>
                                    
<li >
    <a href="../pictureframe/">Picture Frame</a>
</li>
                                    
<li >
    <a href="../bacon/">Making Bacon</a>
</li>
                                    
<li >
    <a href="../clickninja/">Click Ninja</a>
</li>
                                    
<li >
    <a href="../thirsty/">Thirsty Zombie</a>
</li>
                                    
<li >
    <a href="../zombie/">Zombie Madness</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../sprites/">Drawing Sprites</a>
</li>
                                    
<li >
    <a href="../actors/">Actor Framework</a>
</li>
                                    
<li >
    <a href="../levels/">Levels</a>
</li>
                                    
<li >
    <a href="../mazes/">Mazes</a>
</li>
                                    
<li >
    <a href="../score/">Scoring</a>
</li>
                                </ul>
                            </li>
                            <li >
                                <a href="https://groups.google.com/a/predicate.us/forum/#!forum/support">Support</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../../about/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../pictureframe/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/predigame"><i class="fa fa-github"></i> GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#fireworks">Fireworks!</a></li>
            <li><a href="#prerequisites">Prerequisites</a></li>
            <li><a href="#download-existing-game-optional">Download Existing Game (Optional)</a></li>
            <li><a href="#getting-started">Getting Started</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="fireworks">Fireworks!</h1>
<p>A relatively simple and fun Predigame example that highlights image sprites, callbacks, and sound effects.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>You'll need to have the Predigame platform installed, a trusty text editor handy, and the command prompt (or terminal) open to complete these examples. Visit <a href="http://predigame.io">http://predigame.io</a> for installation instructions.</p>
<h2 id="download-existing-game-optional">Download Existing Game (Optional)</h2>
<p>We have a version of this game already done and ready to go. Just run the following command:</p>
<pre><code>pred pull fireworks
</code></pre>

<p>Then read the rest of the tutorial and follow along.</p>
<h2 id="getting-started">Getting Started</h2>
<p>To get things started, we're going to create a new Predigame game. This can be done by typing the following the command in the terminal:</p>
<pre><code>pred new fireworks
</code></pre>

<p>Now in the text editor, find and open the file <code>fireworks/game.py</code>. Now let's get started!</p>
<p>For the code, we'll start by defining our screen dimensions (30 x 20 grid cells) and window title:</p>
<pre><code class="python">WIDTH = 30
HEIGHT = 20
TITLE = 'Fireworks!'
</code></pre>

<p>Since fireworks normally launch in the evening, we'll paint our background black.</p>
<pre><code># make the background black
BACKGROUND = (0,0,0)
</code></pre>

<p>This defines the background using a RGB (RED, GREEN, BLUE) tuple. We also have some constants defined for common colors, so setting the line this way would have the same effect:</p>
<pre><code># make the background black
BACKGROUND = BLACK
</code></pre>

<p>For your game, you may wish to use a background image instead. That's possible provided that the image is stored in the <code>backgrounds/</code> directory. Then the code would look something like this (<em>NOTE that we don't use file extensions for images, backgrounds, and sounds</em>).</p>
<pre><code class="python"># use a background image
BACKGROUND = 'castle_at_night'
</code></pre>

<p>The core of the game consists of two callbacks. First is a one to launch the firework and the second to create the explosion effect. Let's cover launching first:</p>
<pre><code class="python">def launch():
        # play a sound
        sound('fireworks')

        # create a random position with some padding to keep away from edges
        p = rand_pos(x_padding=5, y_padding=10)

        # create a really small yellow circle
        # position circle at point p's x coordinate but under the viewable area
        s = shape(CIRCLE, YELLOW, (p[0], WIDTH-5), size=0.1)

        # move the sprite to the designated area
        # callback (destroy) will be invoked when sprite arrives at destination
        s.speed(15).move_to(p, callback=s.destroy)

        # schedule to have the launch function called again..
        # some random time between 0 and 3 seconds
        callback(launch, rand(0, 3))

# start show in 1 second!
callback(launch, 1)
</code></pre>

<p>Now let's give it a test run!</p>
<pre><code>pred game.py
</code></pre>

<p>You'll notice that fireworks launch and sound effects are playing, but there is <em>no explosion</em>! That's due to this line:</p>
<pre><code class="python">        s.speed(15).move_to(p, callback=s.destroy)
</code></pre>

<p>Once the yellow circle sprite moves to point <code>p</code> the callback <code>s.destroy</code> is invoked. As the name implies, that simply destroys the sprite.</p>
<p>Now let's handle the explosion. We'll define a function to handle that effect:</p>
<pre><code class="python">def explode(s):
        s.destroy()
        # pick a random number between 1 and 5
        num = randint(1, 5)
        # load the fireworks image sprite
        img = image('fireworks-'+str(num), s.pos, size=0.5)
        # make the image pulse (get big), destroy between 0.1 and 4 seconds
        img.pulse(time=4, size=10).destruct(rand(0.1,4))
</code></pre>

<p>In our example, we currently have five fireworks images in our <code>images/</code> directory:</p>
<pre><code>fireworks-1.png fireworks-2.png fireworks-3.png fireworks-4.png fireworks-5.png
</code></pre>

<p>Go ahead a find some fireworks of your own. Transparent images always work best. You'll want to label them similar to how we did so it's easy to randomly pick one of the images. The <code>randint(1,5)</code> line simply picks a number between 1 and 5 at random. The image will initially render at roughly sized at one half a grid cell. The image will slowly pulse with a four second interval. Note that the image will <code>destruct</code> between 0.1 and 4 seconds, so this basically means the firework will expand and never contract.</p>
<p>With the explosion defined, we'll now want to go back and reset the yellow sprite callback to use our new <code>explode</code> function:</p>
<pre><code class="python">        s.speed(15).move_to(p, callback=partial(explode, s))
</code></pre>

<p>Here's the completed version (without comments):</p>
<pre><code class="python">WIDTH = 30
HEIGHT = 20
TITLE = 'Fireworks!'

BACKGROUND = (0,0,0)

def explode(s):
        s.destroy()
        num = randint(1, 5)
        img = image('fireworks-'+str(num), s.pos, size=0.5)
        img.pulse(time=4, size=10).destruct(rand(0.1,4))

def launch():
        sound('fireworks')
        p = rand_pos(x_padding=5, y_padding=10)
        s = shape(CIRCLE, YELLOW, (p[0], WIDTH-5), size=0.1)
        s.speed(15).move_to(p, callback=partial(explode, s))
        callback(launch, rand(0, 3))

callback(launch, 1)
</code></pre>

<p>Save your changes and enjoy the show!</p>
<pre><code>pred game.py
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
